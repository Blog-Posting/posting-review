# CDNs(Content delivery networks)에 대해 알아보자 #1

- AWS CloudFront를 사용중인데 CDN, 캐쉬 관련해서 대략적인 개념만 알고 있는 상태다.
- 웹 최적화를 검색하는 도중 CDN관련 내용이 있어 간단하게 정리하겠다.
- [web.dev](https://web.dev/content-delivery-networks/) 여기 포스팅을 참고 했다.

## 개요

- **CDN**은 분산된 서버 네트워크를 사용해 사용자들에게 리소스를 제공함으로써 사이트 성능을 향상시킨다. CDN은 서버 부하(서버 로드)를 줄이기 때문에, 서버 비용을 절감하고, 트래픽 급증(traffic spkies) 처리에 적합하다.
- 이 포스팅은 CDN이 작동하는 법, CDN 설정 최적화, 플랫폼을 고르는법과 설정하는 법을 알려준다.
- CDN은 캐시 된 컨텐츠를 제공하는 걸로 잘 알려져 있지만, 캐쉬 할수 없는 컨텐츠를 제공할때도 좋다.
- CDN의 성능 이점은 다음과 같은 원칙에 의해 이루어진다.
  - CDN서버들은 **origin servers(CDN이 컨텐츠를 불러오는 서버)**보다 사용자에게 더 가깝게 위치해 있다. 그러므로 **round-trip time(RTT)(왕복시간 요청-응답)**가 짧다.
  - CDN서버들은 네트워크 최적화를 통해 직접 origin servers에서 사용자에게 컨텐츠를 제공하는것보다 빠르다.
  - CDN캐시를 사용하면 origin server에게 요청(request)을 하지 않는다.

## 리소스 제공(Resource delivery)

- CDN을 사용하여 origin server에서 리소스를 제공할때, 사용자와 사용자 근처에 있는 CDN서버간에 새로운 연결이 만들어진다.
- CDN과 origin server간의 데이터 전송은 CDN의 네트워크에 발생한다. CDN과 origin server 지속적인 연결을 유지한다.
- 이를 통해 얻는 장점은 2가지이다.
  - 새로운 연결은 가능한 한 사용자와 가까운 CDN과 연결하면 불필요한 연결 설정 비용을 줄일 수 있다.(새로운 연결은 비용이 많이 들고, RTT가 필요하다.)
  - 미리 연결되어 있는 경우에는 최대 가능한 데이터 처리량을 즉시 전송이 가능하다.

![cdn1](images/2020-09-24-CDNs-1/cdn1.png)

- 일부 CDN은 인터넷에 분산 된 여러 CDN 서버들을 통해 트래픽을 origin server로 라우팅함으로써 향상시킨다.
- 여러 CDN끼리의 연결(connections)은 **Border Gateway Protocol(BGP)**보다 안정적이고, 높은 최적화된 경로를 통해 발생한다.
- BGP는 인터넷 라우팅 프로토콜이지만 성능 지향적이 아니다. 따라서, BGP가 결정한 경로는 CDN 서버간에 최적화된 경로보다 성능이 떨어질 수 있다.

![cdn2](images/2020-09-24-CDNs-1/cdn2.png)

## 캐시(Caching)

## 캐시 가능한 리소스(Cacheable resources)